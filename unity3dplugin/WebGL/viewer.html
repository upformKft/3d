<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway-Medium:wght@400&display=swap"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway-SemiBold:wght@400&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway-Bold:wght@400&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway-Regular:wght@400&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:wght@500&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins-SemiBold:wght@400&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JosefinSans-Bold:wght@400&display=swap" />
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="gui.css?v2" rel="stylesheet">
	<title>Viewer</title>
        <link rel="shortcut icon" href="TemplateData/favicon.ico">
        <link rel="stylesheet" href="TemplateData/style.css">

    </head>

    <body>
        <div class="window d-flex w-100 h-100">
            <div class="left-panel">
                <div class="home-div d-flex align-items-center justify-content-center">
                    <img class="home-icon" src="./images/home-icon.svg" alt="">
                </div>

                <div class="left-icons-panel " id="unity-fullscreen-button">
                    <img class="icons" alt="" src="./images/icons.svg">
                </div>
            </div>
            <div class="middle-panel flex-fill">
                <div class="top-bar d-flex">
                    <div class="ps-4 flex-fill d-flex align-items-center">
                        <img class="logo-icon" src="./images/minimallogowhite@2x.png" alt="">
                    </div>
                    <div class="wish-list-div d-flex align-items-center justify-content-center">
                        <img class="wish-list-icon" src="./images/wishlist-icon.svg" alt="">
                    </div>
                    <div class="basket-div d-flex align-items-center justify-content-center">
                        <img class="basket-icon" src="./images/shoppingbasket@2x.png" alt="">
                        <div class="badge-icon d-flex justify-content-center align-items-center">12</div>
                    </div>
                    <div class="d-flex align-items-center ps-5 pe-5">
                        <div class="sign-btn d-flex justify-content-center align-items-center">
                            <div class="sign-in">SIGN IN</div>
                        </div>    
                    </div>
                </div>
                <div class="viewer-panel" style="min-width: 500px;">

				<div id="unity-container" class="unity-desktop">


			      		<canvas id="unity-canvas" width=100% height=100%></canvas>
					<div id="unity-loading-bar">

						<div id="loader">
								  <div class="spinner" style="position: absolute;"></div>
						</div>

					</div>

				</div>

		</div>
            </div>
            <div class="element-panel"  float: left; style="min-width: 100px;">
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
                <div class="element-div d-flex align-items-center justify-content-center">
                    <img class="element-icon" src="./images/elem@2x.png" alt="">
                </div>
            </div>
            <div class="option-panel"  float: left; style="min-width: 200px;">
                <div class="head-text-panel">
                    <div class="head-text text-end">EASE 70 CM</div>
                    <div class="head-sub-text text-end">Box-shaped countertop for oak wood countertop washbasin.</div>    
                </div>
                <div class="d-flex add-item-btn align-items-center">
                    <div class="flex-fill d-flex justify-content-center ps-5">Add item</div>
                    <img class="add-item-icon d-flex justify-content-center ms-3 me-3" src="./images/plus-icon-gray.svg" alt="">
                </div>
                <div class="line-containers">&nbsp;</div>
                <div class="btn1-containers d-flex">
                    <div class="btn1-btn">
                        <div class="relative">
                            <img class="select-icon" src="./images/active.svg" alt="">
                        </div>
                        <div class="w-100 h-100 d-flex align-items-center justify-content-center">Wall</div>
                    </div>
                    <div class="btn1-btn">
                        <div class="relative">
                            <img class="select-icon" src="./images/active.svg" alt="">
                        </div>
                        <div class="w-100 h-100 d-flex align-items-center justify-content-center">Floor</div>
                    </div>
                    <div class="btn1-btn">
                        <div class="relative">
                            <img class="select-icon" src="./images/active.svg" alt="">
                        </div>
                        <div class="w-100 h-100 d-flex align-items-center justify-content-center">Floor</div>
                    </div>
                </div>
                <div class="line-containers">&nbsp;</div>
                <div class="btn1-containers d-flex">
                    <div class="btn2-btn">
                        <div class="relative">
                            <img class="select-btn2" src="./images/active.svg" alt="">
                        </div>
                        <img class="btn2-img" src="./images/20210312257stq90@2x.png" alt="">
                        <div class="btn2-under-text mt-2">STAY - Seat</div>
                        <div class="btn2-under-text">40cm DX</div>
                    </div>
                    <div class="btn2-btn">
                        <div class="relative">
                            <img class="select-btn2" src="./images/active.svg" alt="">
                        </div>
                        <img class="btn2-img" src="./images/20210312257stq90@2x.png" alt="">
                        <div class="btn2-under-text mt-2">STAY - Seat</div>
                        <div class="btn2-under-text">40cm DX</div>
                    </div>
                    <div class="btn2-btn">
                        <div class="relative">
                            <img class="select-btn2" src="./images/active.svg" alt="">
                        </div>
                        <img class="btn2-img" src="./images/20210312257stq90@2x.png" alt="">
                        <div class="btn2-under-text mt-2">STAY - Seat</div>
                        <div class="btn2-under-text">40cm DX</div>
                    </div>
                    <div class="btn2-btn">
                        <div class="relative">
                            <img class="select-btn2" src="./images/active.svg" alt="">
                        </div>
                        <img class="btn2-img" src="./images/20210312257stq90@2x.png" alt="">
                        <div class="btn2-under-text mt-2">STAY - Seat</div>
                        <div class="btn2-under-text">40cm DX</div>
                    </div>
                </div>
                <div class="line-containers">&nbsp;</div>
                <div class="btn1-containers d-flex">
                    <div class="btn3-btn d-flex justify-content-center align-items-center">
                        <div class="btn3-text">Cement</div>
                    </div>
                    <div class="btn3-btn d-flex justify-content-center align-items-center">
                        <div class="btn3-text">Cement</div>
                    </div>
                    <div class="btn3-btn d-flex justify-content-center align-items-center">
                        <div class="btn3-text">Cement</div>
                    </div>
                    <div class="btn3-btn d-flex justify-content-center align-items-center">
                        <div class="btn3-text">Cement</div>
                    </div>
                </div>
                <div class="effect-panel">
                    <div class="effect-label">TUPE EFFECT</div>
                    <div class="w-100 d-flex">
                        <div class="btn4-btn">
                            <div class="relative">
                                <img class="select-btn2" src="./images/active.svg" alt="">
                            </div>
                            <img class="effect-img" src="./images/clip2@2x.png" alt="" onclick="SetMaterial('TexturesCom_Marble_SlabTravertine_4K_albedo (Instance)')">
                        </div>
                        <div class="btn4-btn">
                            <div class="relative">
                                <img class="select-btn2" src="./images/active.svg" alt="">
                            </div>
                            <img class="effect-img" src="./images/clip2@2x.png" alt="" onclick="SetMaterial('TexturesCom_Marble_SlabTravertine_4K_albedo (Instance)')">
                        </div>    
                    </div>
                </div>
                <div class="effect-panel">
                    <div class="effect-label">MARBLE EFFECT</div>
                    <div class="w-100 d-flex">
                        <div class="btn4-btn">
                            <div class="relative">
                                <img class="select-btn2" src="./images/active.svg" alt="">
                            </div>
                            <img class="effect-img" src="./images/clip2@2x.png" alt="" onclick="SetMaterial('TexturesCom_Marble_SlabBlack_4K_albedo (Instance)')">
                        </div>
                        <div class="btn4-btn">
                            <div class="relative">
                                <img class="select-btn2" src="./images/active.svg" alt="">
                            </div>
                            <img class="effect-img" src="./images/clip2@2x.png" alt="" onclick="SetMaterial('TexturesCom_Marble_SlabBlack_4K_albedo (Instance)')">
                        </div>    
                    </div>
                </div>
                <div class="line-containers">&nbsp;</div>
                <div class="pag-panel w-100">
                    <div class="size-label">Metalness</div>
                    <!--div class="pag-label">cm</div-->
                    <div class="w-100 d-flex">
                        <div class="pag-line-panel">
                            <div class="relative">
<!--
                                <img class="point-item" src="./images/path-187.svg" alt="">
-->
                            </div>
<!--
                            <img src="./images/path-186.svg" alt="">
-->
			    <input type="range" id="vol" name="vol" min="0" max="100" onchange="SetMetalness(this.value,'metalness_value')">
                            <img  class="pag-measuring" src="./images/group-271.svg" alt="">
                        </div>
                        <div class="pag-counter d-flex justify-content-center align-items-center" id="metalness_value"></div>
                    </div>    
                </div>
                <div class="line-containers">&nbsp;</div>
                <div class="pag-panel w-100">
                    <div class="size-label">Normal</div>
                    <!--div class="pag-label">cm</div-->
                    <div class="w-100 d-flex">
                        <div class="pag-line-panel">
                            <div class="relative">
<!--                                <img class="point-item" src="./images/path-187.svg" alt="">-->
                            </div>
<!--                            <img src="./images/path-186.svg" alt="">-->
			    <input type="range" id="vol" name="vol" min="0" max="100" onchange="SetNormal(this.value,'normal_value')">
                            <img  class="pag-measuring" src="./images/group-271.svg" alt="">
                        </div>
                        <div class="pag-counter d-flex justify-content-center align-items-center" id="normal_value"></div>
                    </div>    
                </div>
                <div class="pag-panel w-100">
                    <div class="size-label">Color</div>
                    <div class="w-100 d-flex">
                        <div class="pag-line-panel">
                            <div class="relative">
                            </div>

			    <input type="color" id="vol" name="vol" min="0"  value="#e66465" onchange="SetColor(this.value,'color_value')">
                        </div>
                        <div class="pag-counter d-flex justify-content-center align-items-center" id="color_value"></div>
                    </div>    
                </div>

                <div class="sum-panel d-flex">
                    <div class="d-flex align-items-center justify-content-center pdf-panel">
                        <div class="sum-pdf-label">Create PDF</div>
                        <img class="sum-pdf-img" src="./images/vector-smart-object.svg" alt="">
                    </div>
                    <div class="d-flex flex-fill align-items-center justify-content-end total-label"><span class="total-text">Total</span>475.000 Ft</div>
                </div>
                <div class="btns d-flex align-items-center">
                    <div class="cancel-btn">Cancel</div>
                    <div class="draft-btn d-flex align-items-center justify-content-center">Save draft</div>
                    <div class="save-btn d-flex align-items-center justify-content-center">Add to basket</div>
                </div>
            </div>
        </div>

    <script>
        var _unity;


        function ModelLoaded() {
		 loadingBar.style.display = "none";	 
	}

	function SetMetalness(newVal, id) {
	    console.log("change:" + newVal);
		document.getElementById(id).innerHTML = newVal;
 	    _unity.SendMessage('LoadModelFromURL', 'SetMaterialMetalness', Math.ceil(newVal));
	}

	function SetNormal(newVal, id) {
		document.getElementById(id).innerHTML = newVal;
 	    _unity.SendMessage('LoadModelFromURL', 'SetMaterialNormal', Math.ceil(newVal));
	}

	function SetColor(newVal) {
	    console.log("change:" + newVal + ":"+ parseInt(newVal.substring(1, 7),16));
 	    _unity.SendMessage('LoadModelFromURL', 'SetMaterialColor', parseInt(newVal.substring(1, 7),16));
	}


	function SetMaterial(newVal) {
	    console.log("change:" + newVal);
//	    document.getElementById("SZERKESZTO").scrollTo({ top: 0, behavior: 'smooth' });
 	    _unity.SendMessage('LoadModelFromURL', 'SetMaterial', newVal);
	}

        function Export(str) {
		 alert(str);
	}



      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var fullscreenButton = document.querySelector("#unity-fullscreen-button");
      var warningBanner = document.querySelector("#unity-warning");

      const queryString = window.location.search;
      console.log(queryString);
      const urlParams = new URLSearchParams(queryString);
      console.log(urlParams.get('model'));

      // Shows a temporary message banner/ribbon for a few seconds, or
      // a permanent error message on top of the canvas if type=='error'.
      // If type=='warning', a yellow highlight color is used.
      // Modify or remove this function to customize the visually presented
      // way that non-critical warnings and error messages are presented to the
      // user.
      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == 'error') div.style = 'background: red; padding: 10px;';
        else {
          if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
          setTimeout(function() {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "Build";
      var loaderUrl = buildUrl + "/WebGL.loader.js";
      var config = {
        dataUrl: buildUrl + "/WebGL.data.gz",
        frameworkUrl: buildUrl + "/WebGL.framework.js.gz",
        codeUrl: buildUrl + "/WebGL.wasm.gz",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "My project",
        productVersion: "0.1",
        showBanner: unityShowBanner,
      };

      // By default Unity keeps WebGL canvas render target size matched with
      // the DOM size of the canvas element (scaled by window.devicePixelRatio)
      // Set this to false if you want to decouple this synchronization from
      // happening inside the engine, and you would instead like to size up
      // the canvas DOM size and WebGL render target sizes yourself.
      // config.matchWebGLToCanvasSize = false;

      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        // Mobile device style: fill the whole browser client area with the game canvas:

        var meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.getElementsByTagName('head')[0].appendChild(meta);
        container.className = "unity-mobile";
        canvas.className = "unity-mobile";

        canvas.style.width = "100%";
        canvas.style.height = "100%";


        // To lower canvas resolution on mobile devices to gain some
        // performance, uncomment the following line:
        // config.devicePixelRatio = 1;
      } else {
        // Desktop style: Render the game canvas in a window that can be maximized to fullscreen:

        canvas.style.width = "100%";
        canvas.style.height = "100%";
      }

      loadingBar.style.display = "block";

      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
//          progressBarFull.style.width = 100 * progress + "%";
        }).then((unityInstance) => {
	  _unity = unityInstance;
	  if (urlParams != null && urlParams.get('model')) {
		  unityInstance.SendMessage('LoadModelFromURL', 'Send', urlParams.get('model'));
	  } else {
		console.log("Fall back to default model");
		  unityInstance.SendMessage('LoadModelFromURL', 'Send', '{"modelURL":"model/notexture.fbx","materials":[{"name":"Mat","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":0.800000011920929,"g":0.800000011920929,"b":0.800000011920929,"a":1.0},"metalness":0.0,"normal":0.5,"specular":false},{"name":"Mat.004","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":0.0,"g":0.0,"b":0.0,"a":1.0},"metalness":0.8199999928474426,"normal":1.0,"specular":false},{"name":"Mat.003","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":0.800000011920929,"g":0.800000011920929,"b":0.800000011920929,"a":1.0},"metalness":0.5718182325363159,"normal":0.09999999403953552,"specular":false},{"name":"Spec_Mat.002b","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":1.0,"g":1.0,"b":1.0,"a":1.0},"metalness":1.0,"normal":1.0,"specular":false},{"name":"Mat.1","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":0.0,"g":0.0,"b":0.0,"a":1.0},"metalness":0.8199999928474426,"normal":1.0,"specular":false},{"name":"Mat.2","diffuseTextureName":"","metalTextureName":"","roughnessTextureName":"","diffuseColor":{"r":0.09999997168779373,"g":0.09999997168779373,"b":0.09999997168779373,"a":1.0},"metalness":1.0,"normal":1.0,"specular":false}]}');
	  }
          fullscreenButton.onclick = () => {
            unityInstance.SetFullscreen(1);
          };
        }).catch((message) => {
          alert(message);
        });
      };
      document.body.appendChild(script);
    </script>
  </body>
</html>
